{"version":3,"file":"static/webpack/static/development/pages/index.js.c431b5a6891e6bd09b49.hot-update.js","sources":["webpack:///./components/Player.js"],"sourcesContent":["import { useRef, useState, useEffect } from 'react';\nimport { Slider } from 'antd';\nimport YouTube from 'react-youtube';\nimport {\n  FaSpinner,\n  FaPlay,\n  FaPause,\n  FaStepBackward,\n  FaStepForward,\n} from 'react-icons/fa';\nimport { TiArrowShuffle } from 'react-icons/ti';\nimport { FiRepeat } from 'react-icons/fi';\n\nconst opts = {\n  height: '0',\n  width: '0',\n  playerVars: {\n    autoplay: 1,\n  },\n};\n\nconst sliderStyle = { width: 400 };\n\nconst YT_STATE = {\n  UNSTARTED: -1,\n  ENDED: 0,\n  PLAYING: 1,\n  PAUSED: 2,\n  BUFFERING: 3,\n  CUED: 5,\n};\n\nconst renderPlayButton = (state, ref) => {\n  const classes = 'mx-4 cursor-pointer text-white';\n  switch (state) {\n    case YT_STATE.PLAYING:\n      return (\n        <FaPause\n          className={classes}\n          onClick={() => {\n            ref.current.internalPlayer.pauseVideo();\n          }}\n        ></FaPause>\n      );\n    case YT_STATE.PAUSED:\n      return (\n        <FaPlay\n          className={classes}\n          onClick={() => {\n            ref.current.internalPlayer.playVideo();\n          }}\n        ></FaPlay>\n      );\n    default:\n      return (\n        <FaSpinner className=\"pointer-events-none mx-4 text-white icon-spin\"></FaSpinner>\n      );\n  }\n};\n\nconst udpateProgressBar = (ref, setCurrentTime) => {\n  ref.current?.internalPlayer.getCurrentTime().then((data) => {\n    setCurrentTime(data);\n  });\n};\n\nconst Player = (props) => {\n  const ref = useRef();\n\n  const [isRepeat, setIsRepeat] = useState(false);\n  const [isShuffle, setIsShuffle] = useState(false);\n  const [ytState, setYtState] = useState(YT_STATE.UNSTARTED);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // update progress bar\n      udpateProgressBar(ref, setCurrentTime);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, props.id);\n\n  const onStateChange = (event) => {\n    if (event.data === YT_STATE.ENDED) {\n      props.setSongIndex(props.songIndex + 1);\n      setCurrentTime(0);\n      setDuration(0);\n      return;\n    }\n    setYtState(event.data);\n  };\n\n  ref.current?.internalPlayer.getDuration().then((data) => setDuration(data));\n\n  return (\n    <>\n      <YouTube\n        ref={ref}\n        videoId={props.id}\n        opts={opts}\n        onStateChange={onStateChange}\n      />\n      <div className=\"flex flex-grow\">\n        <div className=\"flex items-center flex-grow\">\n          <FiRepeat\n            className={`mx-4 cursor-pointer ${\n              isRepeat ? 'text-primary' : 'text-white'\n            }`}\n            onClick={() => {\n              setIsRepeat(!isRepeat);\n            }}\n          />\n          <FaStepBackward\n            className=\"mx-4 cursor-pointer text-white\"\n            onClick={() => {\n              props.setSongIndex(props.songIndex - 1);\n            }}\n          />\n          {renderPlayButton(ytState, ref)}\n          <FaStepForward\n            className=\"mx-4 cursor-pointer text-white\"\n            onClick={() => {\n              props.setSongIndex(props.songIndex + 1);\n            }}\n          />\n          <TiArrowShuffle\n            className={`mx-4 cursor-pointer text-xl ${\n              isShuffle ? 'text-primary' : 'text-white'\n            }`}\n            onClick={() => {\n              setIsShuffle(!isShuffle);\n            }}\n          />\n          <Slider\n            style={sliderStyle}\n            min={0}\n            max={duration}\n            onChange={(value) => {\n              ref.current?.internalPlayer.seekTo(value);\n            }}\n            tooltipVisible={false}\n            value={currentTime}\n            className=\"flex-grow mx-6 text-primary\"\n          />\n          <p className=\"text-white mb-0 mx-6\">timer</p>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Player;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAOA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAHA;AAQA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AArBA;AAwBA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAGA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAGA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAGA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;A","sourceRoot":""}